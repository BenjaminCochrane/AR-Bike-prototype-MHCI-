<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
    <script>
      AFRAME.registerComponent('button', {
        schema: {
          item_id: {default: '0'}
        },

        // The init function defines component behaviour
        init: function () {
          var data = this.data;
          var element = this.el;

          // Cursor enter callback - updates button colour to show it is targeted
          element.addEventListener('mouseenter', function () {
            element.setAttribute('animation', 'property: rotation; to: 0 360 1; dur: 4000; easing: linear; loop: true;');
          });

          // Cursor leave callback - resets button colour to its default value
          element.addEventListener('mouseleave', function () {
            element.setAttribute('animation', '');
          });
          
          // Cursor click callback - updates button colour and updates a text label
          element.addEventListener('click', function () {
            element.setAttribute('color', 'property: scale; to: 0.5 0.3 0.01; dur: 1000; easing: linear; loop: false;');
          });
        }
      });
    </script>
  </head>
  <body>    
    <a-scene>
      <a-assets>
        <a-asset-item id="burger" src="https://cdn.glitch.global/326e3dc1-eeff-4f02-8913-b8b16b58dbfd/burger.gltf?v=1673449251315"></a-asset-item>
        
        <a-mixin id="item-label" geometry="primitive: plane;" material="opacity: 0.0; transparent: true;" text="align: center; anchor: center; baseline: center; color: white; wrap-count: 10;"></a-mixin>
      </a-assets>
      
      <a-sky color="#005398"></a-sky>
      
      <!-- Create cursor with animated visual feedback -->
      <a-entity camera look-controls wasd-controls position="0 1.6 0">
        <a-entity
          animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 100; from: 0.1 0.1 0.1; to: 1 1 1"
          animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 600; from: 1 1 1; to: 0.1 0.1 0.1"
          animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 100; to: 1 1 1"
          cursor="fuse: true; fuseTimeout: 600" material="color: white; shader: flat; opacity: 0.5;" position="0 0 -1" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.035"></a-entity>
      </a-entity>
      
      <a-sphere position="-0.3 1.6 -1" scale="0.15 0.15 0.15" material="color: white; opacity: 0.2;">
        <a-entity id="icon-burger" gltf-model="#burger" position="0 -0.15 0" scale="2 2 2"></a-entity>
        <a-entity mixin="item-label" text="value: Burger 3.50;" position="0 -0.5 0.1"></a-entity>
      </a-sphere>
    </a-scene>
  </body>
</html>